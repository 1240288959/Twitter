<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8">
    <title>查找用户</title>
    <link rel="stylesheet" th:href="@{css/bootstrap.css}"/>
</head>
<body>
<div th:include="nav :: nav"></div>
<div th:each="user:${list}">
    <img th:src="@{'img/'+${user.image}}" alt="...此处为查找到的头像"/>
    <button class="btn btn-primary" th:if="'getattention(\''+${user.id}+'\')'" th:onclick="'deleteattented(\''+${user.id}+'\',this)'" >关注中</button>
    <button class="btn btn-primary" th:unless="'getattention(\''+${user.id}+'\')'" th:onclick="'addattented(\''+${user.id}+'\',this)'" >关注</button>
    <span th:text="${user.name}"></span>
</div>
</body>
<script th:src="@{js/jquery.min.js}"></script>
<script th:src="@{js/bootstrap.js}"></script>
<script>
    function getattention(id){
        var flag;
        $.ajax({
            url:"",
            type:"get",
            date:"id="+id,
            success:function (msg) {
                   if(msg==true){
                        flag=true;
                   }else{
                        flag=false;
                   }
                   return false;
            }
        });
        return flag;
    }
</script>
<script>
    function deleteattented(id,button) {
        console.log(id);
        $.ajax({
            url: "/deleteattented",
            type:"get",
            data:"id="+id,
            success:function (msg) {
                if(msg==true){
                    console.log("成功");
                    $(button).hide();
                }else{
                    console.log("失败");
                }
                return false;
            }
        });
        return false;
    }
</script>
<script>
    function deleteattented(id,button) {
        console.log(id);
        $.ajax({
            url: "/addattented",
            type:"get",
            data:"id="+id,
            success:function (msg) {
                if(msg==true){
                    console.log("成功");
                    $(button).hide();
                }else{
                    console.log("失败");
                }
                return false;
            }
        });
        return false;
    }
</script>
</html>