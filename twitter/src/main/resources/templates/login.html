<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8"/>
    <title>登录页面</title>
    <link rel="stylesheet" th:href="@{css/bootstrap.css}"/>
</head>
<body>
<div th:include="nav :: nav"></div>
<div class="login-box"  style="width: 50%;margin: 0 auto;">
    <form  id="myform" method="get">
        <div class="form-group" >
            <label class="col-sm-2 control-label" for="email">email:</label>
            <div class="col-sm-10" style="margin-bottom: 20px">
                <input class="form-control" type="text" id="email" name="email" placeholder="请输入邮箱"/>
            </div>
        </div>

        <div class="form-group" >
            <label class="col-sm-2 control-label" for="password">password:</label>
            <div class="col-sm-10" style="margin-bottom: 20px">
                <input class="form-control" type="password" id="password"  name="password" placeholder="请输入密码"/>
            </div>
        </div>

        <div class="col-sm-offset-2 col-sm-10">
            <button id="submit"  class="btn btn-primary" style="width: 100%">提交</button>
            <div id="alert_fail" class="alert alert-danger alert-dismissible"  style="margin-top: 20px" hidden="true">
                <button id="close_alert_fail" type="button" class="close"  aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <strong>Error！</strong> 用户名或密码错误
            </div>
            <div id="alert_success" class="alert alert-success alert-dismissible"  style="margin-top: 20px" hidden="true">
                <button id="close_alert_success" type="button" class="close"  aria-label="Close"><span aria-hidden="true">&times;</span></button>
                <strong>Success！</strong> 登录成功,正在跳转...
            </div>
        </div>
    </form>
</div>
</body>
<script th:src="@{js/jquery.min.js}"></script>
<script th:src="@{js/bootstrap.js}"></script>
<script>
    $("#submit").click(function () {
        $.ajax({
            url:"/login",
            type:"get",
            async:true,
            dataType:"json",
            data:$("#myform").serialize(),
            success:function (msg) {
                console.log(msg);
                if(msg==true) {
                    $("#alert_success").show();

                    var count=1;
                    setInterval(function () {
                        if(count==0){
                            location.href="/tomain";
                        }
                        count--;
                    },500)
                }
                else {
                    /*alert("登陆失败");*/
                    $("#alert_fail").show();
                }
                return false;
            }
        });
        return false;
    });

    $("#close_alert_fail").click(function () {
       $("#alert_fail").hide();
    });

    $("#close_alert_success").click(function () {
        $("#alert_success").hide();
    });
</script>
</html>